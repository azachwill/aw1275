<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2020-04-08">

<title>Great Looking Tables: gt (v0.2)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
</style>


<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">


</head>

<body>


<header id="title-block-header">
<h1 class="title">Great Looking Tables: gt (v0.2)</h1>

<p class="date">2020-04-08</p>
</header>

<p>We are extremely excited to have our first release of the <strong>gt</strong> package available in CRAN! The name <strong>gt</strong> is short for “grammar of tables” and the goal of <strong>gt</strong> is similar to that of <strong>ggplot2</strong>, serving to not just to make it easy to make specific tables, but to describe a set of underlying components that can be recombined in different ways to solve different problems.</p>
<p>If you ever need to make beautiful customized <em>display</em> tables, I think you’ll find <strong>gt</strong> is up to the task. You can install <strong>gt</strong> 0.2 from CRAN with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"gt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For an initial release, it’s pretty big! There are so many ways to structure a table, apply formatting and annotations, and style it just the way you want. Currently <strong>gt</strong> renders tables to the HTML output format (and has the ability to export to image files). We plan to also support the LaTeX and RTF output formats in the near future.</p>
<p>The <a href="https://gt.rstudio.com">website for the <strong>gt</strong> package</a> has walkthrough articles for getting started and a <a href="https://gt.rstudio.com/reference/index.html">function reference section</a> with plenty of examples and images to show you how the table output is meant to appear.</p>
<h2 id="lets-get-acquainted-with-our-model-of-a-table" class="anchored">Let’s get acquainted with our model of a table</h2>
<p>We decided to formalize the parts of a table—and give them names—so that we have some language to act on. The larger components of a table (roughly from top to bottom) include the <em>table header</em>, the <em>column labels</em>, the <em>stub</em> and <em>stub head</em>, the <em>table body</em>, and the <em>table footer</em>. Within each of these components, there may be subcomponents (e.g., the <em>table header</em> contains a <em>title</em> and <em>subtitle</em>, the <em>table body</em> contains individual <em>cells</em>, etc.). Understanding how the parts fit together will make more sense with this diagram:</p>
<p align="center">
<img src="gt_parts_of_a_table.svg" width="100%">
</p>
<p>Learning new vocabulary is definitely a pain, but we believe it’s worthwhile. Like <strong>ggplot2</strong>, the new words take some getting used to, but we believe learning them will improve your ability to analyze and understand existing tables, and then successfully recreate them in <strong>gt</strong>.</p>
<h2 id="examples-with-the-exibble-dataset" class="anchored">Examples with the <code>exibble</code> dataset</h2>
<p>The <code>exibble</code> dataset is included in <strong>gt</strong> and its <em>raison d’etre</em> is to be a small dataset (8 rows and 9 columns) with different column types for experimenting with formatting. It fits easily on a single screen when printed as a tibble and rendered as a <strong>gt</strong> table, making it easy to see the results of our <strong>gt</strong> experimentation.</p>
<div class="cell" data-paged.print="false">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>exibble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 9
          num char       fctr  date       time  datetime    currency row   group
        &lt;dbl&gt; &lt;chr&gt;      &lt;fct&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1       0.111 apricot    one   2015-01-15 13:35 2018-01-01…    50.0  row_1 grp_a
2       2.22  banana     two   2015-02-15 14:40 2018-02-02…    18.0  row_2 grp_a
3      33.3   coconut    three 2015-03-15 15:45 2018-03-03…     1.39 row_3 grp_a
4     444.    durian     four  2015-04-15 16:50 2018-04-04… 65100    row_4 grp_a
5    5550     &lt;NA&gt;       five  2015-05-15 17:55 2018-05-05…  1326.   row_5 grp_b
6      NA     fig        six   2015-06-15 &lt;NA&gt;  2018-06-06…    13.3  row_6 grp_b
7  777000     grapefruit seven &lt;NA&gt;       19:10 2018-07-07…    NA    row_7 grp_b
8 8880000     honeydew   eight 2015-08-15 20:20 &lt;NA&gt;            0.44 row_8 grp_b</code></pre>
</div>
</div>
<h3 id="a-simple-table" class="anchored">A simple table</h3>
<p>Let’s use that dataset to make the ‘Hello, World!’ of <strong>gt</strong> tables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>exibble <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="table_1.png" width="100%"> <br></p>
<p>Just like how the <code>ggplot()</code> function is the entry point to <strong>ggplot2</strong> plots, the <a href="https://gt.rstudio.com/reference/gt.html"><code>gt()</code></a> function serves as the first function to call for making <strong>gt</strong> tables.</p>
<h3 id="formatting-data-in-columns" class="anchored">Formatting data in columns</h3>
<p>The <code>exibble</code> dataset is blessed with an array of column types. This makes it a snap to experiment with <strong>gt</strong>’s collection of <code>fmt_*()</code> functions, which format the input data values.</p>
<p>Let’s test as many formatter functions as possible. Here’s the plan:</p>
<ul>
<li>have <code>num</code> display numbers with exactly 2 decimal places using <a href="https://gt.rstudio.com/reference/fmt_number.html"><code>fmt_number()</code></a></li>
<li>show nicely formatted dates in <code>date</code> using <code>date_style</code> <code>6</code> (the <code>m_day_year</code> style) with <a href="https://gt.rstudio.com/reference/fmt_date.html"><code>fmt_date()</code></a></li>
<li>format the 24-h time values in <code>time</code> to <code>time_style</code> <code>4</code> (the <code>hm_p</code> style) with <a href="https://gt.rstudio.com/reference/fmt_time.html"><code>fmt_time()</code></a></li>
<li>make the datetimes in <code>datetime</code> formatted as such with the <a href="https://gt.rstudio.com/reference/fmt_datetime.html"><code>fmt_datetime()</code></a> function</li>
<li>transform the <code>currency</code> column with <a href="https://gt.rstudio.com/reference/fmt_currency.html"><code>fmt_currency()</code></a> to show us values in the euro currency (<code>currency = "EUR"</code>)</li>
</ul>
<p>Phew! Here’s the code and the corresponding <strong>gt</strong> table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>exibble <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">vars</span>(num), <span class="at">decimals =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_date</span>(<span class="at">columns =</span> <span class="fu">vars</span>(date), <span class="at">date_style =</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_time</span>(<span class="at">columns =</span> <span class="fu">vars</span>(time), <span class="at">time_style =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_datetime</span>(<span class="at">columns =</span> <span class="fu">vars</span>(datetime), <span class="at">date_style =</span> <span class="dv">6</span>, <span class="at">time_style =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="at">columns =</span> <span class="fu">vars</span>(currency), <span class="at">currency =</span> <span class="st">"EUR"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="table_2.png" width="100%"> <br></p>
<p>As can be seen, entire columns had formatting applied to them in very specific ways. There is some finer control available as well. We can style a subselection of rows in any given column and there are quite a few ways to specify the target rows (e.g., row indices, row names in the stub, conditional statement based on column data, etc.).</p>
<p>This only scratches the surface of what is possible in formatting the <em>table body</em>, there are more <code>fmt_*()</code> functions. If they don’t exactly suit your needs you can use the general <a href="https://gt.rstudio.com/reference/fmt.html"><code>fmt()</code></a> function and provide your own transformation function.</p>
<h3 id="a-table-with-a-header-and-a-footer" class="anchored">A table with a <em>header</em> and a <em>footer</em></h3>
<p>We can add components to the table. Let’s include a <em>header</em> with a title and subtitle, and, a <em>footer</em> with a source note. These parts are added with the <a href="https://gt.rstudio.com/reference/tab_header.html"><code>tab_header()</code></a> and <a href="https://gt.rstudio.com/reference/tab_source_note.html"><code>tab_source_note()</code></a> functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>exibble <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"This is the `exibble` dataset in **gt**"</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"It is one of six datasets in the package"</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="fu">md</span>(<span class="st">"More information is available at `?exibble`."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="table_3.png" width="100%"> <br></p>
<p>Adding new parts to the table is typically done by using a few <code>tab_*()</code> functions. Notice that we could style our text using Markdown with the included <a href="https://gt.rstudio.com/reference/md.html"><code>md()</code></a> function.</p>
<h3 id="adding-a-stub-and-organizing-rows-into-row-groups" class="anchored">Adding a <em>stub</em> and organizing rows into <em>row groups</em></h3>
<p>The <code>exibble</code> dataset has the <code>row</code> and <code>group</code> columns, which were purposefully included for experimentation with the table <em>stub</em> and with <em>row groups</em>. Rather than explaining those components at length, let’s revise the above code so that these columns are used to create those components:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>exibble <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">rowname_col =</span> <span class="st">"row"</span>, <span class="at">groupname_col =</span> <span class="st">"group"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"This is the `exibble` dataset in **gt**"</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">md</span>(<span class="st">"We can use the `row` and `group` columns to structure the table"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="fu">md</span>(<span class="st">"More information is available at `?exibble`."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="table_4.png" width="100%"> <br></p>
<p>This change effectively gives us row labels in a separate area to the left (the <em>stub</em>), and, row group labels above each grouping of rows. This is great for data that naturally falls into groupings. And worry not, if the initial order isn’t what you expected or wanted, the <a href="https://gt.rstudio.com/reference/row_group_order.html"><code>row_group_order()</code></a> function can be used to reorder the groupings.</p>
<h3 id="using-spanner-column-labels" class="anchored">Using <em>spanner column labels</em></h3>
<p>Just as with the <em>stub</em>, we can create groupings of columns with <em>spanner column labels</em> that encompass one or more columns. The <a href="https://gt.rstudio.com/reference/tab_spanner.html"><code>tab_spanner()</code></a> function makes this possible. By providing a <code>label</code> and a selection of <code>columns</code> the new label is placed above those columns and the associated horizontal rule will span across. Should the <code>columns</code> not be adjacent to each other, <a href="https://gt.rstudio.com/reference/tab_spanner.html"><code>tab_spanner()</code></a> will automatically gather them together.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>exibble <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">rowname_col =</span> <span class="st">"row"</span>, <span class="at">groupname_col =</span> <span class="st">"group"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="st">"Dates and Times"</span>, <span class="at">columns =</span> <span class="fu">matches</span>(<span class="st">"date|time"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"This is the `exibble` dataset in **gt**"</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">md</span>(<span class="st">"We can use the `tab_spanner()` function to organize and label columns"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="fu">md</span>(<span class="st">"More information is available at `?exibble`."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="table_5.png" width="100%"> <br></p>
<h3 id="more-so-much-more" class="anchored">More… so much more</h3>
<p>It’s really not possible to explore much of what <strong>gt</strong> can do in a short blog post. You can do many more useful things like inserting footnotes, modifying text, borders, and fills, and, adding summary rows. Here’s an example of how the <code>pizzaplace</code> dataset can look with a little <strong>gt</strong> code (not shown here but <a href="https://gist.github.com/rich-iannone/1da1ae7a7203958a0c5b1bd1d4b24017">available in this gist</a>):</p>
<div class="cell">

</div>
<p><img src="table_6.png" width="100%"> <br></p>
<p>Getting started with <strong>gt</strong> can be a risk-free experience with the <strong>gt Test Drive</strong>. Hit the button below to be transported to an <strong>RStudio Cloud</strong> project with examples galore:</p>
<p align="center">
<a href="https://rstudio.cloud/project/779965"> <img src="gt-test-drive.svg" alt="RStudio Cloud Example" height="80px"> </a>
</p>
<p>To make it easy to experiment with making <strong>gt</strong> tables, we included <a href="https://gt.rstudio.com/articles/gt-datasets.html">six datasets</a> in the package: <code>countrypops</code>, <code>sza</code>, <code>gtcars</code>, <code>sp500</code>, <code>pizzaplace</code> (your favorite), and <code>exibble</code>. Strangely enough, each of these datasets is celebrated with a circular logo.</p>
<p align="center">
<img src="gt_datasets_labeled.svg" width="100%">
</p>
<p>(Each of these datasets has a unique story in the world of <strong>gt</strong> so the deluxe graphics are warranted.)</p>
<p>While we’re only getting started on this package we feel things are really coming along. But sure to visit and engage with us at the <a href="https://github.com/rstudio/gt/issues"><strong>gt</strong> issue tracker</a>. We want to hear of any bugs, usage questions, or great ideas you might have to make this package better. Thanks!</p>


<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
  tabsets.forEach(function(tabset) {
    const tabby = new Tabby('#' + tabset.id);
  });
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>



</body></html>