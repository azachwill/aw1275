<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-05-31">
<meta name="description" content="Description here.">

<title>posit-blogs - Publishing a Shiny App in R with clinical trial data to Posit Connect</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">


</head>

<body>


<header id="title-block-header">
<h1 class="title">Publishing a Shiny App in R with clinical trial data to Posit Connect</h1>

<p class="date">2023-05-31</p>
</header>

<blockquote>
<p class="body-md-regular body-sm-regular">
<em>This is part 4 in our series of blog posts, “What can you do with Posit Connect?” </em>
</p>
<p class="body-md-regular body-sm-regular">
<em><a href="https://posit.co/products/enterprise/connect/"><span style="color: #a2b8cb;">Posit Connect</span></a> is a publishing platform for the authenticated sharing of R and Python data products in one convenient place that brings the power of data science to your entire organization. On the last Wednesday of every month, we host a Posit Team demo and Q&amp;A session that is open to all. You can use <a href="https://pos.it/team-demo"><span style="color: #a2b8cb;">this link</span></a> to add the event to your calendar.<br> </em>
</p>
</blockquote>
<p>Open source is changing how drug development happens. Clinical teams are making better decisions, working through clinical trials more confidently, and bringing life-changing drugs to market faster. One way that teams are doing this is with Shiny.</p>
<p>In a recent Data Science Hangout, the Novartis team shared how they use a Shiny app with a Javascript backend published to Posit Connect to display safety data in a more user-friendly way. This app is used by the Data Monitoring Committee, which includes highly regarded external experts in their field. Moving from their typical 200-page PDFs to a Shiny app has been crucial to making the most effective use of this Data Monitoring Committee members’ time.</p>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/JwrEB9cqNqg?start=716" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</center>
<h2 id="follow-along---how-to-publish-a-shiny-app-in-r-with-clinical-trial-data-to-posit-connect" class="anchored">Follow Along - How to Publish a Shiny App in R with Clinical Trial Data to Posit Connect</h2>
<center>
<script src="https://fast.wistia.com/embed/medias/50isbm3g06.jsonp" async=""></script>
<script src="https://fast.wistia.com/assets/external/E-v1.js" async=""></script>
<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;">
<div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div class="wistia_embed wistia_async_50isbm3g06 videoFoam=true" style="height:100%;position:relative;width:100%">
<div class="wistia_swatch" style="height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;transition:opacity 200ms;width:100%;">
<img src="https://fast.wistia.com/embed/medias/50isbm3g06/swatch" style="filter:blur(5px);height:100%;object-fit:contain;width:100%;" alt="" aria-hidden="true" onload="this.parentNode.style.opacity=1;">
</div>
</div>
</div>
</div>
</center>
<p>The clinical trial data we’ll use for this demo and follow-along blog post is publicly available. It has been properly de-identified and cleansed for demonstration purposes.</p>
<p>As a high-level overview, clinical trials are usually conducted to assess the efficacy of various disease interventions. During the trial, data will be collected, organized, and eventually found inside an analysis-ready dataset called an ADaM or Analysis Data Model dataset. These ADaM datasets are usually what’s submitted to various regulatory agencies, such as the FDA.</p>
<p>This example will focus on an ADaM Subject-Level Dataset (ADSL) and includes things like subject ID number, treatment group, age, body mass index (BMI), height, weight, and years of education.</p>
<p>Given that these datasets contain numerous descriptive columns, it can be a challenge to create static insights such as plots and tables to explore them all. For this reason, we will create an interactive web application using Shiny.</p>
<p>You can access the GitHub repo for this example (including the Shiny app and dataset here): <a href="https://github.com/ryjohnson09/adam_analysis">https://github.com/ryjohnson09/adam_analysis</a></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img1.png" class="img-fluid" alt="Shiny app showing boxplots for ADaM Subject-Level Analysis" width="600"></p>
</figure>
</div>
<p>The application above will allow viewers to explore the data for themselves and compare various subject-level variables between the three treatment groups.</p>
<h2 id="step-1-create-a-new-project-in-posit-workbench" class="anchored">Step 1: Create a new project in Posit Workbench</h2>
<p>In Posit Workbench, start a New Session. You’ll see that we have the option of Jupyter Notebooks, JupyterLab, RStudio Pro, and VS Code. For this walkthrough, we’re going to use RStudio.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img2.png" class="img-fluid" alt="Posit Workbench window that selects the IDE" width="450"></p>
</figure>
</div>
<p>For validated compute environments, it’s often necessary that certain aspects of this RStudio session are controlled for, including the following:</p>
<ul>
<li>What R version is being used</li>
<li>Which R or system packages come preinstalled</li>
</ul>
<p>This is where tools like Docker are important. Resource sizing and customized Docker image selection options will be available if Posit Workbench utilizes an external cluster such as Slurm or Kubernetes.</p>
<p>For this example, we use the default Docker image within our demo environment and click “Start session.”</p>
<p>Before we do any analysis, it’s important that we establish a new RStudio project for this clinical trial analysis. This will help isolate our project from other projects on our system. This is generally considered good practice for not just clinical trial data but all data science projects.</p>
<p>To create a project, we can select “File” at the top of the screen and select “New Project.” For this example, we’ll create a new directory/project called “test_adsl_analysis.” There are two boxes labeled “Create a git repository” and “Use renv with this project,” that we’re going to check.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img3.png" class="img-fluid" alt="Create new project window in RStudio" width="450"></p>
</figure>
</div>
<p>To ensure reproducibility for your project, it’s always a good idea to use version control and initialize the project with renv. More on renv below.</p>
<h2 id="step-2-upload-the-adam-adsl-dataset-to-posit-workbench" class="anchored">Step 2: Upload the ADaM ADSL dataset to Posit Workbench</h2>
<p>The ADaM ADSL dataset can be found on the <a href="https://github.com/cdisc-org/sdtm-adam-pilot-project/tree/master/updated-pilot-submission-package/900172/m5/datasets/cdiscpilot01/analysis/adam/datasets">CDISC GitHub “SDTM ADaM Pilot Project” repository</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://github.com/cdisc-org/sdtm-adam-pilot-project/raw/master/updated-pilot-submission-package/900172/m5/datasets/cdiscpilot01/analysis/adam/datasets/adsl.xpt"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, <span class="st">"adsl.xpt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the repository above, the data is “adsl.xpt.” After downloading the data to your local machine, select the upload button in RStudio to upload the dataset to your Posit Workbench environment.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img4.png" class="img-fluid" data-fig.alt="Open file window in RStudio" width="500"></p>
</figure>
</div>
<h2 id="step-3-install-necessary-packages-from-the-validated-posit-package-manager-repository" class="anchored">Step 3: Install necessary packages from the validated Posit Package Manager repository</h2>
<p>For some data science teams, especially those working with clinical data and submitting results to regulatory agencies, the development environment must be carefully designed and tightly regulated to ensure reproducibility. This is often referred to as a validated environment. Within a validated environment, open-source packages are usually vetted to ensure they meet specific requirements before making them available to developers via a validated package repository.</p>
<p>To ensure your team is using the packages from your validated repository, you can use Posit Package Manager. In the demo environment shown below, there are a few customized repositories, including a validated repository which includes packages classified as validated for clinical work.</p>
<p>It’s important to note that this is just an example repository to demonstrate that it’s possible to create customized repositories depending on your team’s needs.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img5.png" class="img-fluid" data-fig.alt="Posit Package Manager website with validated R packages" width="500"></p>
</figure>
</div>
<p>To ensure you’re using packages from that specific repository, there are two options. Option 1: Change the repository URL using the Global Options in the RStudio IDE.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img6.png" class="img-fluid" data-fig.alt="Package management window in RStudio" width="500"></p>
</figure>
</div>
<p>Option 2: Set the repository programmatically. To do this, copy the code from within Posit Package Manager to your .Rprofile script. Example code below:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">REPO_NAME =</span> <span class="st">"https://colorado.posit.co/rspm/validated/latest"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The .Rprofile script will always be run as soon as you start a new R session. Once you restart R, you can check to see that the validated repository is now your active repository by running:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="st">"repos”)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For the Shiny application, you will need to install the following R packages:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"shiny"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"haven"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"bslib"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"scales"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"plotly"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h2 id="step-4-create-the-shiny-application" class="anchored">Step 4: Create the Shiny application</h2>
<p>Start by creating a blank R script and paste the code for the Shiny application from this GitHub repository: <a href="https://github.com/ryjohnson09/adam_analysis">https://github.com/ryjohnson09/adam_analysis</a></p>
<p>Below is the code for the Shiny application:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)   <span class="co"># Web app development</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)   <span class="co"># Read in SAS dataset</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)   <span class="co"># Provide UI options</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># Data visualization</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)  <span class="co"># Improve axis labels</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)  <span class="co"># Interactive graphics</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in Data -------------------------------</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> <span class="fu">read_xpt</span>(<span class="st">"adsl.xpt"</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># User Interface -----------------------------</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Drop down select input</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">"subject_data"</span>, <span class="st">"Subject Data"</span>, </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Age"</span> <span class="ot">=</span> <span class="st">"AGE"</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Baseline BMI"</span> <span class="ot">=</span> <span class="st">"BMIBL"</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Baseline Height"</span> <span class="ot">=</span> <span class="st">"HEIGHTBL"</span>,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Baseline Weight"</span> <span class="ot">=</span> <span class="st">"WEIGHTBL"</span>,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Years of Education"</span> <span class="ot">=</span> <span class="st">"EDUCLVL"</span>))),</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Main panel (boxplot)</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(<span class="fu">plotOutput</span>(<span class="st">"boxplot"</span>))</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Server Function ---------------------------</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create Plot</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>boxplot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">data =</span> adsl, <span class="fu">aes</span>(<span class="at">x =</span> TRT01A, </span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>                            <span class="at">y =</span> .data[[input<span class="sc">$</span>subject_data]], </span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> TRT01A)) <span class="sc">+</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>            <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"ADSL Data"</span>,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">"Comparing Treatment Groups"</span>,</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="fu">attributes</span>(adsl[[input<span class="sc">$</span>subject_data]])</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">label_wrap</span>(<span class="dv">10</span>))</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">res =</span> <span class="dv">100</span>)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is a simple application that explores the subject-level variables in this study, and it compares them between the various treatment arms. It includes those that were given a placebo, those that were given a low dose of a drug known as Xanomeline, and then another treatment group that was given a high dose of Xanomeline.</p>
<p>On the Y-axis, we have the various subject-level variables that we can explore, such as age, baseline BMI, baseline height, baseline weight, and years of education.</p>
<script src="https://fast.wistia.com/embed/medias/50isbm3g06.jsonp" async=""></script>
<script src="https://fast.wistia.com/assets/external/E-v1.js" async=""></script>
<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;">
<div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div class="wistia_embed wistia_async_50isbm3g06 seo=true videoFoam=true" style="height:100%;position:relative;width:100%">
<div class="wistia_swatch" style="height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;transition:opacity 200ms;width:100%;">
<img src="https://fast.wistia.com/embed/medias/50isbm3g06/swatch" style="filter:blur(5px);height:100%;object-fit:contain;width:100%;" alt="" aria-hidden="true" onload="this.parentNode.style.opacity=1;">
</div>
</div>
</div>
</div>
<h2 id="step-5-deploy-your-shiny-application-to-posit-connect" class="anchored">Step 5: Deploy your Shiny application to Posit Connect</h2>
<p>For instructions on how to publish a Shiny application from within the RStudio IDE, you can refer to the Shiny App JumpStart example on the Posit Connect homepage. JumpStart examples are short walkthroughs built into Connect and show you how to deploy various types of applications.</p>
<p>If the JumpStart examples do not pop up immediately when you log in to Connect, you can access the JumpStart examples in the top right-hand corner by clicking the Publish dropdown.</p>
<p>If we fast forward to step 5, we can see the instructions for publishing to Posit Connect from within the RStudio IDE.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img7.png" class="img-fluid" data-fig.alt="Publish button in RStudio" width="400"></p>
</figure>
</div>
<p>First, we push the blue publish button from within the RStudio IDE, and if publishing for the very first time, you’ll need to insert the URL for your Posit Connect server, as shown below.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="images/img8.png" class="img-fluid" data-fig.alt="Posit Connect account window in RStudio" width="400"></p>
</figure>
</div>
<p>Once you select “Next”, a pop up menu will appear to confirm the connection, and select “Connect.”</p>
<p>After giving the Shiny application a title and the contents of the deployment bundle, you can hit “Publish.” Once we do this, we’ll get a deploy tab that opens up, and the RStudio IDE will take care of everything needed for publishing.</p>
<p>It will capture the environment (the R version used, packages used, versions of those packages, and some other information about your environment) and replicate that on the Posit Connect server.</p>
<p>Once that environment has been replicated, it then deploys the Shiny application - making it exceptionally easy to share this content with others.</p>
<h2 id="making-your-project-reproducible-using-renv" class="anchored">Making your Project Reproducible using renv</h2>
<p>If someone else wanted to reproduce your work, there is certain information that would be helpful to include in your R project, including:</p>
<ul>
<li>Which R version was used?</li>
<li>What packages were used?</li>
<li>What package versions were used?</li>
<li>Where were the packages installed from (repositories)?</li>
</ul>
<p>Enter <a href="https://rstudio.github.io/renv/index.html">renv</a>! This open-source R package can easily create a recording of our project’s R and package dependencies. To leverage renv, you need to be within an <a href="https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects">RStudio Project</a>. You can either <a href="https://docs.posit.co/ide/user/ide/guide/environments/r/renv.html#new-project-use-renv-with-this-project">initialize a new project out of the gate by clicking the box “Use renv with this project.”</a> Or, from within a current RStudio Project, you can run the init() function from within the renv package. This will create a <a href="https://rstudio.github.io/renv/reference/lockfiles.html?q">renv.lock</a> file, which will keep track of our project’s R and package dependencies! This file can also be shared with others to reproduce the project’s package environment.</p>
<p>As your project’s package environment changes (install/update/delete packages), you can update the renv.lock file by running the snapshot() function from within renv.</p>
<h2 id="learn-more" class="anchored">Learn more</h2>
<p>This example covered publishing a Shiny application in R to Posit Connect, but you have many options for data products that you can deploy to Connect.</p>
<p>With Connect, it’s easy to share Shiny applications (in both R and Python), Jupyter Notebooks, Quarto and R Markdown reports, Plumber and Flask APIs, Dash, Bokeh, Voilà, Streamlit applications, Quarto projects, dashboards, plots, and more in one convenient place to bring the power of data science to your entire organization.</p>
<p>Previously covered walkthroughs:</p>
<ul>
<li><a href="https://posit.co/blog/deploying-a-dash-application-to-posit-connect/">Deploying a Dash application with Posit Connect</a></li>
<li><a href="https://posit.co/blog/pins-posit-connect/">Leveraging Pins with Posit Connect</a></li>
<li><a href="https://posit.co/blog/deploying-a-shiny-for-python-application-with-posit-connect/">Deploying a Shiny for Python application with Posit Connect</a></li>
</ul>
<p>We’d love to have you join us at one of our monthly Posit Team Demos, where we walk through a different end-to-end data science workflow each month. They are on the last Wednesday of every month at 11 am ET on YouTube. You can add the event to your calendar here: <a href="https://pos.it/team-demo">pos.it/team-demo</a></p>
<p>If you have any questions and would like to talk with our team, you can schedule a time to chat <a href="https://posit.co/schedule-a-call/?booking_calendar__c=RSC_Demo">here</a>.</p>


<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
  tabsets.forEach(function(tabset) {
    const tabby = new Tabby('#' + tabset.id);
  });
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>



</body></html>